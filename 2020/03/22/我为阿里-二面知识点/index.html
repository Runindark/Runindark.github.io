<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>《天净沙·我·二面知识点总结》  双非菜鸡奇葩，面试项目框架，java java，卑微学子去哪？ | Cat's blog</title><meta name="description" content="《天净沙·我·二面知识点总结》  双非菜鸡奇葩，面试项目框架，java java，卑微学子去哪？"><meta name="keywords" content=""><meta name="author" content="夜小猫"><meta name="copyright" content="夜小猫"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://runindark.com/2020/03/22/我为阿里-二面知识点/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="《天净沙·我·二面知识点总结》  双非菜鸡奇葩，面试项目框架，java java，卑微学子去哪？"><meta name="twitter:description" content="《天净沙·我·二面知识点总结》  双非菜鸡奇葩，面试项目框架，java java，卑微学子去哪？"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png"><meta property="og:type" content="article"><meta property="og:title" content="《天净沙·我·二面知识点总结》  双非菜鸡奇葩，面试项目框架，java java，卑微学子去哪？"><meta property="og:url" content="http://runindark.com/2020/03/22/我为阿里-二面知识点/"><meta property="og:site_name" content="Cat's blog"><meta property="og:description" content="《天净沙·我·二面知识点总结》  双非菜鸡奇葩，面试项目框架，java java，卑微学子去哪？"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="next" title="《天净沙·我·蘑菇街总结》  双非菜鸡奇葩，面试项目框架，java java，卑微学子去哪？" href="http://runindark.com/2020/03/18/我为阿里-蘑菇街总结/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'false',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Bookmark',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  copyright: undefined,
  copy_copyright_js: false
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Cat's blog</a></span><i class="fa fa-bars fa-fw toggle-menu pull-right close" aria-hidden="true"></i><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">52</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#布隆过滤器"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">布隆过滤器</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#秒杀系统中为什么会产生超卖的现象？"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">秒杀系统中为什么会产生超卖的现象？</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#怎么解决超卖现象？"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">怎么解决超卖现象？</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#细致深入：Redis实现秒杀系统"><span class="toc_mobile_items-number">2.1.1.</span> <span class="toc_mobile_items-text">细致深入：Redis实现秒杀系统</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Redis深入"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">Redis深入</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#redis能用的的加锁命令分表是INCR、SETNX、SET"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">redis能用的的加锁命令分表是INCR、SETNX、SET</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#INCR"><span class="toc_mobile_items-number">3.1.1.</span> <span class="toc_mobile_items-text">INCR</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#SETNX"><span class="toc_mobile_items-number">3.1.2.</span> <span class="toc_mobile_items-text">SETNX</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#SET"><span class="toc_mobile_items-number">3.1.3.</span> <span class="toc_mobile_items-text">SET</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#上锁可能出现的问题"><span class="toc_mobile_items-number">3.1.4.</span> <span class="toc_mobile_items-text">上锁可能出现的问题</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#1、-redis发现锁失败了要怎么办？中断请求还是循环请求？"><span class="toc_mobile_items-number">3.1.4.1.</span> <span class="toc_mobile_items-text">1、 redis发现锁失败了要怎么办？中断请求还是循环请求？</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#2、-循环请求的话，如果有一个获取了锁，其它的在去获取锁的时候，是不是容易发生抢锁的可能？"><span class="toc_mobile_items-number">3.1.4.2.</span> <span class="toc_mobile_items-text">2、 循环请求的话，如果有一个获取了锁，其它的在去获取锁的时候，是不是容易发生抢锁的可能？</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#3、-锁提前过期后，客户端A还没执行完，然后客户端B获取到了锁，这时候客户端A执行完了，会不会在删锁的时候把B的锁给删掉？"><span class="toc_mobile_items-number">3.1.4.3.</span> <span class="toc_mobile_items-text">3、 锁提前过期后，客户端A还没执行完，然后客户端B获取到了锁，这时候客户端A执行完了，会不会在删锁的时候把B的锁给删掉？</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#锁续约问题"><span class="toc_mobile_items-number">3.1.4.4.</span> <span class="toc_mobile_items-text">锁续约问题</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Lua原子性"><span class="toc_mobile_items-number">3.1.4.5.</span> <span class="toc_mobile_items-text">Lua原子性</span></a></li></ol></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#了解java内存模型吗，JVM整体和并发的一些关系"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">了解java内存模型吗，JVM整体和并发的一些关系</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#内存模型操作的八个指令"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">内存模型操作的八个指令</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#volatile"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">volatile</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#AQS"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">AQS</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#阻塞队列"><span class="toc_mobile_items-number">5.1.</span> <span class="toc_mobile_items-text">阻塞队列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#条件队列"><span class="toc_mobile_items-number">5.2.</span> <span class="toc_mobile_items-text">条件队列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Node节点"><span class="toc_mobile_items-number">5.3.</span> <span class="toc_mobile_items-text">Node节点</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-waitstatus"><span class="toc_mobile_items-number">5.3.1.</span> <span class="toc_mobile_items-text">1. waitstatus</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-prev"><span class="toc_mobile_items-number">5.3.2.</span> <span class="toc_mobile_items-text">2. prev</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-next"><span class="toc_mobile_items-number">5.3.3.</span> <span class="toc_mobile_items-text">3. next</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-thread"><span class="toc_mobile_items-number">5.3.4.</span> <span class="toc_mobile_items-text">4. thread</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-nextwaiter"><span class="toc_mobile_items-number">5.3.5.</span> <span class="toc_mobile_items-text">5. nextwaiter</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#NIO"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">NIO</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Channel"><span class="toc_mobile_items-number">6.1.</span> <span class="toc_mobile_items-text">Channel</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Buffer"><span class="toc_mobile_items-number">6.2.</span> <span class="toc_mobile_items-text">Buffer</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Selector"><span class="toc_mobile_items-number">6.3.</span> <span class="toc_mobile_items-text">Selector</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#http-和-https"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">http 和 https</span></a></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#布隆过滤器"><span class="toc-number">1.</span> <span class="toc-text">布隆过滤器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#秒杀系统中为什么会产生超卖的现象？"><span class="toc-number">2.</span> <span class="toc-text">秒杀系统中为什么会产生超卖的现象？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#怎么解决超卖现象？"><span class="toc-number">2.1.</span> <span class="toc-text">怎么解决超卖现象？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#细致深入：Redis实现秒杀系统"><span class="toc-number">2.1.1.</span> <span class="toc-text">细致深入：Redis实现秒杀系统</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis深入"><span class="toc-number">3.</span> <span class="toc-text">Redis深入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#redis能用的的加锁命令分表是INCR、SETNX、SET"><span class="toc-number">3.1.</span> <span class="toc-text">redis能用的的加锁命令分表是INCR、SETNX、SET</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#INCR"><span class="toc-number">3.1.1.</span> <span class="toc-text">INCR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SETNX"><span class="toc-number">3.1.2.</span> <span class="toc-text">SETNX</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SET"><span class="toc-number">3.1.3.</span> <span class="toc-text">SET</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#上锁可能出现的问题"><span class="toc-number">3.1.4.</span> <span class="toc-text">上锁可能出现的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1、-redis发现锁失败了要怎么办？中断请求还是循环请求？"><span class="toc-number">3.1.4.1.</span> <span class="toc-text">1、 redis发现锁失败了要怎么办？中断请求还是循环请求？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2、-循环请求的话，如果有一个获取了锁，其它的在去获取锁的时候，是不是容易发生抢锁的可能？"><span class="toc-number">3.1.4.2.</span> <span class="toc-text">2、 循环请求的话，如果有一个获取了锁，其它的在去获取锁的时候，是不是容易发生抢锁的可能？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3、-锁提前过期后，客户端A还没执行完，然后客户端B获取到了锁，这时候客户端A执行完了，会不会在删锁的时候把B的锁给删掉？"><span class="toc-number">3.1.4.3.</span> <span class="toc-text">3、 锁提前过期后，客户端A还没执行完，然后客户端B获取到了锁，这时候客户端A执行完了，会不会在删锁的时候把B的锁给删掉？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#锁续约问题"><span class="toc-number">3.1.4.4.</span> <span class="toc-text">锁续约问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Lua原子性"><span class="toc-number">3.1.4.5.</span> <span class="toc-text">Lua原子性</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#了解java内存模型吗，JVM整体和并发的一些关系"><span class="toc-number">4.</span> <span class="toc-text">了解java内存模型吗，JVM整体和并发的一些关系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内存模型操作的八个指令"><span class="toc-number">4.1.</span> <span class="toc-text">内存模型操作的八个指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#volatile"><span class="toc-number">4.2.</span> <span class="toc-text">volatile</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AQS"><span class="toc-number">5.</span> <span class="toc-text">AQS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#阻塞队列"><span class="toc-number">5.1.</span> <span class="toc-text">阻塞队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件队列"><span class="toc-number">5.2.</span> <span class="toc-text">条件队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Node节点"><span class="toc-number">5.3.</span> <span class="toc-text">Node节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-waitstatus"><span class="toc-number">5.3.1.</span> <span class="toc-text">1. waitstatus</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-prev"><span class="toc-number">5.3.2.</span> <span class="toc-text">2. prev</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-next"><span class="toc-number">5.3.3.</span> <span class="toc-text">3. next</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-thread"><span class="toc-number">5.3.4.</span> <span class="toc-text">4. thread</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-nextwaiter"><span class="toc-number">5.3.5.</span> <span class="toc-text">5. nextwaiter</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NIO"><span class="toc-number">6.</span> <span class="toc-text">NIO</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Channel"><span class="toc-number">6.1.</span> <span class="toc-text">Channel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Buffer"><span class="toc-number">6.2.</span> <span class="toc-text">Buffer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Selector"><span class="toc-number">6.3.</span> <span class="toc-text">Selector</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http-和-https"><span class="toc-number">7.</span> <span class="toc-text">http 和 https</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/post.png)"><div id="post-info"><div id="post-title"><div class="posttitle">《天净沙·我·二面知识点总结》  双非菜鸡奇葩，面试项目框架，java java，卑微学子去哪？</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2020-03-22<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> Updated 2020-03-27</time><div class="post-meta-wordcount"><span>Post View: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><p><excerpt in="" index="" |="" 首页摘要=""><br>别问 问就是为了面试豁出了老命<br><a id="more"></a></excerpt></p>
<the rest="" of="" contents="" |="" 余下全文="">

<h2 id="布隆过滤器"><a href="#布隆过滤器" class="headerlink" title="布隆过滤器"></a>布隆过滤器</h2><blockquote>
<p>布隆过滤器主要是针对大量数据的一个预判，可以给出两种结果，1.一定不存在 2. 可能存在的<br>布隆过滤器使用多个映射的hash函数将一个数据直接映射到一个bit数组上，当进行插入的时候，n个映射函数的值会直接到达布隆过滤器的索引位置，并且设置树脂为1，因此如果发生hash碰撞会发生，某个数组的位置多次为1，情况，因此会得出可能存在的结论，但是如果查找的时候，n个hash函数有任意一位过滤的数组值为不为1，那么则一定不存在。</p>
</blockquote>
<h2 id="秒杀系统中为什么会产生超卖的现象？"><a href="#秒杀系统中为什么会产生超卖的现象？" class="headerlink" title="秒杀系统中为什么会产生超卖的现象？"></a>秒杀系统中为什么会产生超卖的现象？</h2><blockquote>
<p>由于使用mysql的时候数据库本身的存储引擎innodb是改操作是排他锁，但是读的操作是不上锁的，当到达最后一个的时候，如果都查到还剩下一个，那么其它的请求过来都会同时的更改数据库，那么就会造成超卖，也是快照读的一个弊病。</p>
</blockquote>
<h3 id="怎么解决超卖现象？"><a href="#怎么解决超卖现象？" class="headerlink" title="怎么解决超卖现象？"></a>怎么解决超卖现象？</h3><blockquote>
<p>最简单的思路，就是每次在sql语句中，更改的时候，在where的时候设条件大于0，但是这样子一旦超过数据库的承受能力，还是会超读<br>每次的读操作都上排他锁，这样子可以避免这个现象，但是会导致性能大幅度降低<br>使用redis是最好的方法，可以把要秒杀的内容放到redis的队列中，使用一次则删除一次</p>
</blockquote>
<h4 id="细致深入：Redis实现秒杀系统"><a href="#细致深入：Redis实现秒杀系统" class="headerlink" title="细致深入：Redis实现秒杀系统"></a>细致深入：Redis实现秒杀系统</h4><blockquote>
<p>核心redis的操作命令，sextnx（细粒度上锁） + expire（强制锁释放）</p>
<ol>
<li>首先需要将秒杀的数据放到一个redis中，然后在操作redis的时候可以用setnx去操作数据，所谓细粒度锁是一个抽象概念，sexnx就是具体实现（其实更加直白的理解一些，普通的get/put是一个原子操作,但是一系列操作就不再是原子性的了，setnx是一个原子操作，所以可以作为一个细粒度锁）</li>
<li>更加直接的来，就是将数据都加入到redis的list中，然后使用Lpop命令不断获取就ok（移除并返回列表的第一个元素）</li>
</ol>
</blockquote>
<h2 id="Redis深入"><a href="#Redis深入" class="headerlink" title="Redis深入"></a>Redis深入</h2><h3 id="redis能用的的加锁命令分表是INCR、SETNX、SET"><a href="#redis能用的的加锁命令分表是INCR、SETNX、SET" class="headerlink" title="redis能用的的加锁命令分表是INCR、SETNX、SET"></a>redis能用的的加锁命令分表是INCR、SETNX、SET</h3><blockquote>
<p>redis所有的单独的命令都是原子的</p>
</blockquote>
<h4 id="INCR"><a href="#INCR" class="headerlink" title="INCR"></a>INCR</h4><blockquote>
<p>这种加锁的思路是， key 不存在，那么 key 的值会先被初始化为 0 ，然后再执行 INCR 操作进行加一。然后其它用户在执行 INCR 操作进行加一时，如果返回的数大于 1 ，说明这个锁正在被使用当中。</p>
</blockquote>
<h4 id="SETNX"><a href="#SETNX" class="headerlink" title="SETNX"></a>SETNX</h4><blockquote>
<p>这种加锁的思路是，如果 key 不存在，将 key 设置为 value如果 key 已存在，则 SETNX 不做任何动作</p>
</blockquote>
<h4 id="SET"><a href="#SET" class="headerlink" title="SET"></a>SET</h4><blockquote>
<p>借助 Expire 来设置就不是原子性操作了。所以还可以通过事务来确保原子性，但是还是有些问题，所以官方就引用了另外一个，使用 SET 命令本身已经从版本 2.6.12 开始包含了设置过期时间的功能</p>
</blockquote>
<h4 id="上锁可能出现的问题"><a href="#上锁可能出现的问题" class="headerlink" title="上锁可能出现的问题"></a>上锁可能出现的问题</h4><h5 id="1、-redis发现锁失败了要怎么办？中断请求还是循环请求？"><a href="#1、-redis发现锁失败了要怎么办？中断请求还是循环请求？" class="headerlink" title="1、 redis发现锁失败了要怎么办？中断请求还是循环请求？"></a>1、 redis发现锁失败了要怎么办？中断请求还是循环请求？</h5><blockquote>
<p>可以利用循环进行重复请求</p>
</blockquote>
<h5 id="2、-循环请求的话，如果有一个获取了锁，其它的在去获取锁的时候，是不是容易发生抢锁的可能？"><a href="#2、-循环请求的话，如果有一个获取了锁，其它的在去获取锁的时候，是不是容易发生抢锁的可能？" class="headerlink" title="2、 循环请求的话，如果有一个获取了锁，其它的在去获取锁的时候，是不是容易发生抢锁的可能？"></a>2、 循环请求的话，如果有一个获取了锁，其它的在去获取锁的时候，是不是容易发生抢锁的可能？</h5><blockquote>
<p>循环的时候可以sleep一下</p>
</blockquote>
<h5 id="3、-锁提前过期后，客户端A还没执行完，然后客户端B获取到了锁，这时候客户端A执行完了，会不会在删锁的时候把B的锁给删掉？"><a href="#3、-锁提前过期后，客户端A还没执行完，然后客户端B获取到了锁，这时候客户端A执行完了，会不会在删锁的时候把B的锁给删掉？" class="headerlink" title="3、 锁提前过期后，客户端A还没执行完，然后客户端B获取到了锁，这时候客户端A执行完了，会不会在删锁的时候把B的锁给删掉？"></a>3、 锁提前过期后，客户端A还没执行完，然后客户端B获取到了锁，这时候客户端A执行完了，会不会在删锁的时候把B的锁给删掉？</h5><blockquote>
<p>不一定，可以借助key-value的value进行判断</p>
</blockquote>
<h5 id="锁续约问题"><a href="#锁续约问题" class="headerlink" title="锁续约问题"></a>锁续约问题</h5><blockquote>
<p><strong>Redission</strong><br>当成功的获取一个锁的时候，就会产生一个 watch dog 进行锁续期，每10秒去检查一次，然后重置成设定的过期时间<br>加锁机制是lua脚本<br>解锁过程就比较简单了，如果是程序计数器则继续进行-1，直到等于0，然后删除该key即可（unlock操作）</p>
</blockquote>
<h5 id="Lua原子性"><a href="#Lua原子性" class="headerlink" title="Lua原子性"></a>Lua原子性</h5><blockquote>
<p>Redis 使用单个 Lua 解释器去运行所有脚本，并且， Redis 也保证脚本会以原子性(atomic)的方式执行： 当某个脚本正在运行的时候，不会有其他脚本或 Redis 命令被执行。 这和使用 MULTI / EXEC 包围的事务很类似。 在其他别的客户端看来，脚本的效果(effect)要么是不可见的(not visible)，要么就是已完成的(already completed)</p>
</blockquote>
<h2 id="了解java内存模型吗，JVM整体和并发的一些关系"><a href="#了解java内存模型吗，JVM整体和并发的一些关系" class="headerlink" title="了解java内存模型吗，JVM整体和并发的一些关系"></a>了解java内存模型吗，JVM整体和并发的一些关系</h2><blockquote>
<p>Java内存模型就是定义程序中变量（静态变量、数组对象元素等，不包括局部变量、方法参数）的访问规则</p>
</blockquote>
<h3 id="内存模型操作的八个指令"><a href="#内存模型操作的八个指令" class="headerlink" title="内存模型操作的八个指令"></a>内存模型操作的八个指令</h3><p><a href="https://www.cnblogs.com/zzq6032010/p/10328399.html" target="_blank" rel="noopener">博客原文</a></p>
<ul>
<li><p>lock：作用于主内存变量，将该变量标识为一个线程独占的状态</p>
</li>
<li><p>unlock：作用于主内存变量，将独占状态释放</p>
</li>
<li><p>read：作用于主内存变量，将值拷贝到工作内存中</p>
</li>
<li><p>load：作用于工作内存中的变量，将值放到工作内存中的变量副本中</p>
</li>
<li><p>use：作用于工作内存中的变量，将值传给执行引擎</p>
</li>
<li><p>asign：作用于工作内存中的变量，将执行引擎中的值赋给工作内存中的变量</p>
</li>
<li><p>store：作用于工作内存中的变量，将值传给主内存</p>
</li>
<li><p>write：作用于主内存中的变量，将工作内存中返回的值放到主内存变量中</p>
<h3 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h3><blockquote>
<p>保证load与use必须相邻调用，即要use这个变量，必定先执行read/load，这样每次都能获取到最新的变量值；它又保证asign与store必须相邻调用，即在工作内存中将该变量改了之后，必定会先同步到主内存中</p>
</blockquote>
</li>
</ul>
<h2 id="AQS"><a href="#AQS" class="headerlink" title="AQS"></a>AQS</h2><h3 id="阻塞队列"><a href="#阻塞队列" class="headerlink" title="阻塞队列"></a>阻塞队列</h3><blockquote>
<p>是一个双向的链表，概念上的队列，但不是真正的实现也是队列</p>
</blockquote>
<h3 id="条件队列"><a href="#条件队列" class="headerlink" title="条件队列"></a>条件队列</h3><blockquote>
<p>是根据condition创建出来的队列，上锁后可以负责对线程的监视，比synchronized的监视器更加灵活，是一个单向的链表，当唤醒界节点的时候会直接添加到阻塞队列中</p>
</blockquote>
<h3 id="Node节点"><a href="#Node节点" class="headerlink" title="Node节点"></a>Node节点</h3><h4 id="1-waitstatus"><a href="#1-waitstatus" class="headerlink" title="1. waitstatus"></a>1. waitstatus</h4><ol>
<li><p>CANCELLED：值为1，在同步队列中等待的线程等待超时或被中断，需要从同步队列中取消该Node的结点，其结点的waitStatus为CANCELLED，即结束状态，进入该状态后的结点将不会再变化。</p>
</li>
<li><p>SIGNAL：值为-1，被标识为该等待唤醒状态的后继结点，当其前继结点的线程释放了同步锁或被取消，将会通知该后继结点的线程执行。说白了，就是处于唤醒状态，只要前继结点释放锁，就会通知标识为SIGNAL状态的后继结点的线程执行。</p>
</li>
<li><p>CONDITION：值为-2，与Condition相关，该标识的结点处于等待队列中，结点的线程等待在Condition上，当其他线程调用了Condition的signal()方法后，CONDITION状态的结点将从等待队列转移到同步队列中，等待获取同步锁。</p>
</li>
<li><p>PROPAGATE：值为-3，与共享模式相关，在共享模式中，该状态标识结点的线程处于可运行状态</p>
<h4 id="2-prev"><a href="#2-prev" class="headerlink" title="2. prev"></a>2. prev</h4><blockquote>
<p>前驱节点</p>
</blockquote>
<h4 id="3-next"><a href="#3-next" class="headerlink" title="3. next"></a>3. next</h4><blockquote>
<p>后继节点</p>
</blockquote>
<h4 id="4-thread"><a href="#4-thread" class="headerlink" title="4. thread"></a>4. thread</h4><blockquote>
<p>thread 同步线程队列主要存储的线程信息。</p>
</blockquote>
<h4 id="5-nextwaiter"><a href="#5-nextwaiter" class="headerlink" title="5. nextwaiter"></a>5. nextwaiter</h4><p>AQS中阻塞队列采用的是用双向链表保存，用prve和next相互链接。而AQS中条件队列是使用单向列表保存的，用<br>nextWaiter来连接。阻塞队列和条件队列并不是使用的相同的数据结构</p>
</li>
</ol>
<p><a href="https://segmentfault.com/a/1190000015804888" target="_blank" rel="noopener">精髓原帖</a></p>
<p>在Node节点的源码中有两个常量属性</p>
<pre><code class="java"><span class="comment">// 共享模式</span>
<span class="keyword">static</span> <span class="keyword">final</span> Node SHARED = <span class="keyword">new</span> Node();
<span class="comment">// 独占模式</span>
<span class="keyword">static</span> <span class="keyword">final</span> Node EXCLUSIVE = <span class="keyword">null</span>;
<span class="comment">// 其他模式</span>
<span class="comment">// 其他非空值：条件等待节点（调用Condition的await方法的时候）</span>
</code></pre>
<h2 id="NIO"><a href="#NIO" class="headerlink" title="NIO"></a>NIO</h2><blockquote>
<p>Channel(通道)，Buffer(缓冲区), Selector</p>
</blockquote>
<h3 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h3><blockquote>
<p>通道是双向的，通过一个Channel既可以进行读，也可以进行写</p>
</blockquote>
<h3 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h3><ul>
<li><p>capacity:缓冲区数组的总长度</p>
</li>
<li><p>position:下一个要操作的数据元素的位置</p>
</li>
<li><p>limit:缓冲区数组中不可操作的下一个元素的位置：limit&lt;=capacity</p>
</li>
<li><p>mark:用于记录当前position的前一个位置或者默认是-1</p>
</li>
</ul>
<h3 id="Selector"><a href="#Selector" class="headerlink" title="Selector"></a>Selector</h3><blockquote>
<p>Selector类是NIO的核心类，Selector能够检测多个注册的通道上是否有事件发生，如果有事件发生，便获取事件然后针对每个事件进行相应的响应处理</p>
</blockquote>
<h2 id="http-和-https"><a href="#http-和-https" class="headerlink" title="http 和 https"></a>http 和 https</h2><p>HTTPS和HTTP的主要区别</p>
<ul>
<li><p>https协议需要到CA申请证书，一般免费证书较少，因而需要一定费用。</p>
</li>
<li><p>http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl/tls加密传输协议。</p>
</li>
<li><p>http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。</p>
</li>
<li><p>http的连接很简单，是无状态的；HTTPS协议是由SSL/TLS+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全</p>
</li>
</ul>
</the></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">夜小猫</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://runindark.com/2020/03/22/我为阿里-二面知识点/">http://runindark.com/2020/03/22/我为阿里-二面知识点/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2020/03/18/我为阿里-蘑菇街总结/"><img class="next_cover lozad" data-src="undefined" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>《天净沙·我·蘑菇街总结》  双非菜鸡奇葩，面试项目框架，java java，卑微学子去哪？</span></div></a></div></nav></div></div><footer><div id="footer"><div class="copyright">&copy;2018 - 2020 By 夜小猫</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion">繁</a><i class="nightshift fa fa-moon-o" id="nightshift" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="Scroll to comment"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/nightshift.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();
</script></body></html>